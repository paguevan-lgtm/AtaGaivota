<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Uber Like SPA</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;font-family:system-ui;background:#000;color:#fff}
header{padding:15px;background:#000;border-bottom:1px solid #222;text-align:center;font-weight:600}
.screen{display:none;padding:20px}
.active{display:block}
input,button,select{width:100%;padding:14px;margin:8px 0;border-radius:8px;border:none}
button{background:#1db954;color:#000;font-weight:700}
button.red{background:#ef4444;color:#fff}
.card{background:#111;padding:15px;border-radius:12px;margin-bottom:15px}
.status{padding:12px;background:#1f2933;border-radius:8px;margin-top:10px}
.small{opacity:.7;font-size:14px}
</style>
</head>
<body>

<header>UBER</header>

<!-- LOGIN -->
<div id="login" class="screen active">
  <div class="card">
    <select id="tipo">
      <option value="passageiro">Passageiro</option>
      <option value="motorista">Motorista</option>
    </select>
    <input id="nome" placeholder="Seu nome">
    <button onclick="entrar()">Entrar</button>
  </div>
</div>

<!-- PASSAGEIRO -->
<div id="passageiro" class="screen">
  <div class="card">
    <input id="origem" placeholder="Local de embarque">
    <input id="destino" placeholder="Destino">
    <button onclick="solicitar()">Solicitar corrida</button>
  </div>
  <div class="card">
    <div id="statusP" class="status">Nenhuma corrida</div>
    <button class="red" onclick="cancelar()">Cancelar</button>
  </div>
</div>

<!-- MOTORISTA -->
<div id="motorista" class="screen">
  <div class="card">
    <button onclick="disponivel()">Ficar disponível</button>
    <div id="pedido" class="status">Nenhuma solicitação</div>
    <button onclick="aceitar()">Aceitar</button>
    <button onclick="iniciar()">Iniciar corrida</button>
    <button class="red" onclick="finalizar()">Finalizar</button>
  </div>
</div>

<script>
let user=null

function entrar(){
  const tipo=tipoEl().value
  const nome=nomeEl().value
  if(!nome) return alert("Digite seu nome")
  user={tipo,nome}
  save("user",user)
  show(tipo)
}

function solicitar(){
  const origem=origemEl().value
  const destino=destinoEl().value
  if(!origem||!destino) return alert("Preencha tudo")

  save("corrida",{
    origem,destino,
    passageiro:user.nome,
    motorista:null,
    status:"procurando",
    valor:null
  })
}

function disponivel(){
  let c=get("corrida")
  if(!c||c.status!=="procurando") return
  c.motorista=user.nome
  c.status="aceita"
  save("corrida",c)
}

function aceitar(){disponivel()}

function iniciar(){
  let c=get("corrida")
  if(c&&c.motorista===user.nome){
    c.status="em_viagem"
    save("corrida",c)
  }
}

function finalizar(){
  let c=get("corrida")
  if(!c) return
  c.status="finalizada"
  c.valor=(Math.random()*20+15).toFixed(2)
  save("corrida",c)
}

function cancelar(){
  let c=get("corrida")
  if(c&&c.status==="procurando") localStorage.removeItem("corrida")
}

function render(){
  let c=get("corrida")
  let sp=statusPEl()
  let pd=pedidoEl()

  if(!c){
    if(sp) sp.innerText="Nenhuma corrida"
    if(pd) pd.innerText="Nenhuma solicitação"
    return
  }

  if(sp){
    sp.innerHTML=
      `Status: ${c.status}<br>
       Motorista: ${c.motorista||"Procurando"}<br>
       ${c.valor?`Valor: R$ ${c.valor}`:""}`
  }

  if(pd){
    pd.innerHTML=
      `Passageiro: ${c.passageiro}<br>
       Origem: ${c.origem}<br>
       Destino: ${c.destino}<br>
       Status: ${c.status}`
  }
}

function show(id){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"))
  el(id).classList.add("active")
}

function save(k,v){localStorage.setItem(k,JSON.stringify(v))}
function get(k){return JSON.parse(localStorage.getItem(k))}
function el(id){return document.getElementById(id)}
function tipoEl(){return el("tipo")}
function nomeEl(){return el("nome")}
function origemEl(){return el("origem")}
function destinoEl(){return el("destino")}
function statusPEl(){return el("statusP")}
function pedidoEl(){return el("pedido")}

setInterval(render,800)
</script>

</body>
</html>
